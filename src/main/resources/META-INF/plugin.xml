<!--
  ~ Copyright (C) 2021 Jordie
  ~
  ~ This program is free software: you can redistribute it and/or modify
  ~ it under the terms of the GNU General Public License as published by
  ~ the Free Software Foundation, either version 3 of the License, or
  ~ (at your option) any later version.
  ~
  ~ This program is distributed in the hope that it will be useful,
  ~ but WITHOUT ANY WARRANTY; without even the implied warranty of
  ~ MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
  ~ GNU General Public License for more details.
  ~
  ~ You should have received a copy of the GNU General Public License
  ~ along with this program.  If not, see <https://www.gnu.org/licenses/>.
  -->
<!-- Plugin Configuration File. Read more: https://plugins.jetbrains.com/docs/intellij/plugin-configuration-file.html -->
<idea-plugin>
    <id>nl.jrdie.idea.springql</id>
    <name>Spring GraphQL Support</name>
    <vendor>Jordie</vendor>

    <depends>com.intellij.modules.platform</depends>
    <depends>com.intellij.modules.java</depends>
    <depends>org.jetbrains.kotlin</depends>
    <!--    <depends>com.intellij.java</depends>-->
    <depends>com.intellij.lang.jsgraphql</depends>

    <resource-bundle>messages.SpringGraphQLBundle</resource-bundle>

    <extensions defaultExtensionNs="com.intellij">
        <projectService serviceInterface="nl.jrdie.idea.springql.svc.QLIdeService"
                        serviceImplementation="nl.jrdie.idea.springql.svc.QLIdeServiceImpl"/>

        <codeInsight.lineMarkerProvider language="UAST"
                                        implementationClass="nl.jrdie.idea.springql.ide.gutter.marker.SchemaMappingToSchemaLineMarkerProvider"/>
        <codeInsight.lineMarkerProvider language="GraphQL"
                                        implementationClass="nl.jrdie.idea.springql.ide.gutter.marker.SchemaToSchemaMappingLineMarkerProvider"/>

        <localInspection language="UAST" enabledByDefault="true" groupKey="nl.jrdie.idea.springql.ui.grouping"
                         key="nl.jrdie.idea.springql.inspection.missing.controller"
                         implementationClass="nl.jrdie.idea.springql.ide.hints.QLMissingControllerInspector"/>

        <implicitUsageProvider implementation="nl.jrdie.idea.springql.ide.QLImplicitUsageProvider"/>

        <psi.referenceContributor language="JAVA"
                                  implementation="nl.jrdie.idea.springql.ide.completion.SchemaMappingContributor"/>

        <annotator language="UAST"
                   implementationClass="nl.jrdie.idea.springql.ide.highlighting.SchemaMappingDoesNotExistAnnotator"/>
        <annotator language="UAST"
                   implementationClass="nl.jrdie.idea.springql.ide.highlighting.DuplicateSchemaMappingAnnotator"/>
        <annotator language="UAST"
                   implementationClass="nl.jrdie.idea.springql.ide.highlighting.BatchMappingAndSchemaMappingErrorAnnotator"/>
        <annotator language="UAST"
                   implementationClass="nl.jrdie.idea.springql.ide.highlighting.BatchMappingInvalidReturnTypeErrorAnnotator"/>
        <annotator language="UAST"
                   implementationClass="nl.jrdie.idea.springql.ide.highlighting.SchemaMappingFieldNameOnClassAnnotator"/>
        <annotator language="UAST"
                   implementationClass="nl.jrdie.idea.springql.ide.highlighting.SchemaMappingNoTypeOnClassAnnotator"/>

        <treeStructureProvider implementation="nl.jrdie.idea.springql.ide.tree.QLProjectTreeStructureProvider"/>

        <!-- https://plugins.jetbrains.com/intellij-platform-explorer?extensions=com.intellij.dependencySupport -->
        <!-- https://github.com/JetBrains/intellij-community/blob/58eee3d5b159492dc4c16f02735a28629231937b/platform/platform-impl/src/com/intellij/ide/plugins/DependencyCollector.kt -->
        <dependencySupport kind="java" coordinate="org.springframework.experimental:graphql-spring-boot-starter"
                           displayName="Spring Boot GraphQL Starter (Experimental)"/>
        <dependencySupport kind="java" coordinate="org.springframework:graphql-spring-boot-starter"
                           displayName="Spring Boot GraphQL Starter"/>
        <dependencySupport kind="java" coordinate="org.springframework.graphql:spring-graphql"
                           displayName="Spring GraphQL"/>
        <dependencySupport kind="java" coordinate="org.springframework.graphql:spring-graphql-test"/>
    </extensions>
</idea-plugin>
